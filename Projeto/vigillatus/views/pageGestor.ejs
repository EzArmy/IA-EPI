<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Tailwind css -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- delete modal -->
    <script defer src="/js/delModal.js"></script>
    <link rel="stylesheet" href="/style/delModal.css">
    <title>GESTOR</title>
</head>

<body class="container grid grid-cols-4">

    <div id="loader"></div>

    <%- include('./partials/menu') %>

        <!-- page COntainer -->
        <div class="col-start-2 col-span-3">
            <h1>
                <%= gestorInfo.nome %>
            </h1>
            <h3>
                <%= gestorInfo.email %>
            </h3>
            <h3>
                <%= gestorInfo.senha %>
            </h3>
            <h3>
                <%= gestorCargo.nome %>
            </h3>
            <h3>
                <%= gestorSetor.descricao %>
            </h3>

            <% if(gestorInfo.foto==null) { %>
                <img style="width: 150px; height: 150px;" src="/img/profile/default.jpg" alt="">
                <% } else { %>
                    <img style="width: 150px; height: 150px;" src="/uploads/<%= gestorInfo.id %>/<%= gestorInfo.foto %>"
                        alt="">
                    <% } %>
                        <a href="/home/perfilGestor/edit">
                            <button>
                                Editar perfil
                            </button>
                        </a>
                        <!-- Rota para deletar -->
                        <form action="/home/perfilGestor/edit/delete" method="post">

                        </form>

                        <button onclick="showModal()">DELETE</button>

                        <div id="delModal" class="w-3/5 h-1/2 rounded-lg border-4 border-gray-800">

                            <div class="flex flex-col w-full bg-gray-300 rounded">

                                <div class="flex flex-row justify-end px-5 py-2">
                                    <button onclick="closeModal()">
                                        <img class="h-8 w-8" src="/img/icons/x-lg.svg" alt="close icon">
                                    </button>
                                </div>

                                <div class="flex flex-col h-full justify-center items-center">
                                    <h1 class="text-4xl font-bold my-2">DELETAR? TEM CERTEZA? ðŸ¤”</h1>
                                    <p class="text-xl ">Quer mesmo deletar seu perfil e todas as informaÃ§Ãµes nele
                                        armazenadas?</p>
                                </div>



                                <div class="flex flex-row">
                                    <p>Digite corretamente seu nome para que possa finalmente deletar seu perfil ._.)</p>
                                    <input id="confirmInput" placeholder="<%= gestorInfo.nome %>" type="text"
                                        oninput="checkInput()">
                                </div>

                                <div class="flex flex-row h-full items-center justify-around">
                                    <button disabled id="delBtn" class="p-2 rounded  outline bg-[#e5ecf3]">
                                        Sim, quero deletar minhas informaÃ§Ãµes ðŸ˜ ðŸ˜¡
                                    </button>

                                    <button onclick="closeModal()">
                                        NÃ£o, nÃ£o vou deletar minhas informaÃ§Ãµes ðŸ˜‡
                                    </button>
                                </div>
                            </div>

                        </div>

        </div>
</body>
<!-- Verificando se o conteÃºdo digitado no input Ã© compatÃ­vel com o nome do gestor -->
<script>
    function checkInput() {
        /* Armazenando o nome digitado no input */
        var confirmInput = document.getElementById("confirmInput").value;

        /* Armazenando nome do gestor */
        var gestorName = "<%= gestorInfo.nome %>";

        /* BotÃ£o de deletar */
        var delBtn = document.getElementById('delBtn');

        /* EstilizaÃ§Ã£o para caso o nome seja escrito corretamente */

        /* Usar setAttribute para alterar o estado do botÃ£o de delete */
        if( confirmInput == ''){

            delBtn.setAttribute("disabled", "true")

        }if (confirmInput == gestorName) {

            delBtn.removeAttribute("disabled");
            delBtn.classList.toggle('bg-red-500');
            delBtn.classList.toggle('text-white');
            delBtn.classList.toggle('font-bold');

        } else {
            delBtn.setAttribute("disabled", "true");
        }
        
    }
</script>

</html>